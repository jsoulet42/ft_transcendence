{%  load static %}
    <!-- Button trigger modal -->


<div class="tv-content-profile">
	<h1>{{ user.username }}</h1>
	<div id="choice-div" class="rounded-5 border border-info border-3">
		<img id="choice-img" class="rounded-5 border border-info border-3" src="{% static '/profile/images/character1.png' %}" alt="player-profile">
	</div>
	<h4 class="neonEffect"><br>
		GAME PLAYED :
		<br><br><br>
		WIN COUNT :
        <br><br><br>
        LOOSE COUNT :
	</h4>
    <div id="profile-leftside">
        <h4>Choose</h4>
        <select id="avatarselect" name="avatarselect" class="form-select">
            <option selected value="1">John Doe</option>
            <option value="2">Bunny Bang</option>
            <option value="3">42 Profile</option>
            <option value="4">Uploaded</option>
        </select><br><br><br><br><br>
        <button type="button" style="background-color: #8360c3;" class="btn btn-outline-info" >Upload image</button>
        <h4 id="h4or">Or</h4>
    </div>
    <button type="button" class="bottom-edit btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#exampleModal">EDIT PROFILE</button>
</div>
<script>
    document.getElementById('avatarselect').addEventListener('change', function() {
        var selectedValue = this.value;
        if (selectedValue !== "Default Avatar") {
            var url = "{% url 'get_image_url' %}";
            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': '{{ csrf_token }}'
                },
                body: JSON.stringify({ 'avatarselect': selectedValue })
            })
            .then(response => response.json())
			.then(data => {
				document.getElementById('choice-img').src = data.image_url;
            })
            .catch(error => console.error('Error:', error));
		}
    });
</script>
