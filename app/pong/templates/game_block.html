{% load static %}

{% if hx_push_url %}
<script hx-push-url="{{ hx_push_url }}"></script>
{% endif %}

<br>

<input type="range" min="1" max="10" value="5" id="speedBall" class="slider">
<span id="speedBallValue" style="color: antiquewhite;">5</span> Speed Ball
<br>
<input type="range" min="1" max="10" value="5" id="sizePaddle" class="slider">
<span id="sizePaddleValue" style="color: antiquewhite;">5</span> Size Paddle
<br>
<input type="range" min="1" max="10" value="5" id="speedPaddle" class="slider">
<span id="speedPaddleValue" style="color: antiquewhite;">5</span> Speed Paddle
<br>
<button id="applySettings">Appliquer les paramÃ¨tres</button>
<script>
document.getElementById('speedBall').addEventListener('input', function() {
    document.getElementById('speedBallValue').textContent = this.value;
});

document.getElementById('sizePaddle').addEventListener('input', function() {
    document.getElementById('sizePaddleValue').textContent = this.value;
});

document.getElementById('speedPaddle').addEventListener('input', function() {
    document.getElementById('speedPaddleValue').textContent = this.value;
});
</script>
<button id="modeOne">Partie simple</button>
<br>
<button id="modeTwo">Partie modulaire</button>
<br>
<style>
	.slider {
		-webkit-appearance: none;
		/* Override default appearance */
		appearance: none;
		/* Define standard appearance property for compatibility */
		width: 10%;
		/* Full-width */
		height: 15px;
		/* Specified height */
		background: #ddd;
		/* Grey background */
		outline: none;
		/* Remove outline */
		opacity: 0.7;
		/* Set transparency (for mouse-over effects on hover) */
		-webkit-transition: .2s;
		/* 0.2 seconds transition on hover */
		transition: opacity .2s;
	}

	.slider:hover {
		opacity: 1;
		/* Fully shown on mouse-over */
	}

	.slider::-webkit-slider-thumb {
		-webkit-appearance: none;
		/* Override default look */
		appearance: none;
		width: 25px;
		/* Set a specific slider handle width */
		height: 25px;
		/* Slider handle height */
		background: #000;
		/* Black background */
		cursor: pointer;
		/* Cursor on hover */
	}

	.slider::-moz-range-thumb {
		width: 25px;
		/* Set a specific slider handle width */
		height: 25px;
		/* Slider handle height */
		background: #000;
		/* Black background */
		cursor: pointer;
		/* Cursor on hover */
	}
</style>


<div class="startgame_container">
	<h1 class="text_startgame">Enter your nickname please :D</h1>
	<input type="text" placeholder="Player 2" required class="startgame_playerform" id="player2name">
	<button id="player2nameButton" class="btn startgame_btn">Start the game</button>
</div>
<br>
<button id="tournament_Button" style="display: none; background-color: white;">Commencer le tournoi</button>
<script>
	function yolo() {
		let modedici = new URL(window.location.href).pathname.split("/")[3];
		if (modedici == "tournament") {
			document.getElementById('tournament_Button').style.display = 'block';
			document.getElementById('player2name').style.display = 'none';
			document.getElementById('player2nameButton').style.display = 'none';
		}
	}
	yolo();
</script>
<script>

	var host_name = '{{ user.username }}';
	var player1 = '{{ user.username }}';
	var player2 = '{{ player2 }}';
	var player3 = '{{ player3 }}';
	var player4 = '{{ player4 }}';
	var player5 = '{{ player5 }}';
	var player6 = '{{ player6 }}';
	var player7 = '{{ player7 }}';
	var player8 = '{{ player8 }}';
	var name_player2 = 'Player 2';

	var save_game;
	var save_tournament;

	var speed = document.getElementById('speedBall');
	var sizePaddle = document.getElementById('sizePaddle');
	var speedPaddle = document.getElementById('speedPaddle');
	var modeOne = document.getElementById('modeOne');
	var modeTwo = document.getElementById('modeTwo');
	var applySettings = document.getElementById('applySettings');

	function init() {
		let url = new URL(window.location.href);
		let mode = url.pathname.split("/")[3];
		save_game = '{% url "game_save" %}';
		save_tournament = '{% url "tournament_save" %}';
		speed.style.display = 'none';
		sizePaddle.style.display = 'none';
		speedPaddle.style.display = 'none';
		modeOne.style.display = 'none';
		modeTwo.style.display = 'none';
		applySettings.style.display = 'none';
		if (mode == 'pvp')
		{
			modeOne.style.display = 'block';
			modeTwo.style.display = 'block';
		}
	}
	init();

	function startGame() {

		let url = new URL(window.location.href);
		let mode = url.pathname.split("/")[3];
		document.getElementById('startgame_container').style.display = 'none';

		if (mode == 'pvp') {
			name_player2 = document.getElementById('player2name').value;
			if (name_player2.length > 10)
				name_player2 = name_player2.substring(0, 10);
			if (name_player2 != '') {
				document.getElementById('player2name').style.display = 'none';
				document.getElementById('player2nameButton').style.display = 'none';
				window.startGameFunctionPVP();
			}
			else {
				alert('Enter something ðŸ¤¨')
			}
		} else if (mode == 'pve') {
			name_player2 = "Glados"
			document.getElementById('player2name').style.display = 'none';
			document.getElementById('player2nameButton').style.display = 'none';
			window.startGameFunctionPVE();
		} else if (mode == 'tournament') {
			document.getElementById('tournament_Button').style.display = 'none';
			window.startGameFunctionTournament();
		}
	}
	document.getElementById('tournament_Button').addEventListener('click', startGame);
	document.getElementById('player2nameButton').addEventListener('click', startGame);



	speedBall.addEventListener('input', function () {
		window.speed = speed.value;
	});

	sizePaddle.addEventListener('input', function () {
		window.sizePaddle = sizePaddle.value;
	});
	speedPaddle.addEventListener('input', function () {
		window.speedPaddle = speedPaddle.value;
	});

	modeOne.addEventListener('click', function () {


	});

	modeTwo.addEventListener('click', function () {
		speed.style.display = 'block';
		sizePaddle.style.display = 'block';
		speedPaddle.style.display = 'block';
		applySettings.style.display = 'block';
	});




</script>

<canvas id="pongCanvas"></canvas>
<script type="module" src="{% static 'pong/js/pong.js' %}" defer></script>
